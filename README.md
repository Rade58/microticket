# REMINDER ON KUBERNATES CONTEXT

NAS CLUSTER JE SAD UP AND READY

**POKUSACEMO DA SE CONNECT-UJEMO NA TAJ CLUSTER SA NASE LOKALNE MACHINE, KORISCENJEM `kubectl`**

OVO RADIMO DA BI KASNIJE MOGLI DA DEBUG-UJEEMO NAS CLUSTER, DA GETT-UJEMO LOGS AND STUFF LIKE THAT

GENERALNO NISAT MANUELNO NECEMO DA DEPLOY-UJEMO TO OUR CLUSTER; WE ARE ONLY CONNECTING TO IT TO DEBUG IT AND UNDERSTAND WHAT IS GOING ON INSIDE

**MORACEMO DA KREIRAMO JOS JEDAN CONTEXT, DA BI REKLI `kubectl`-U KAKO DA SE KONEKTUJE NA CLUSTER, KOJI SMO JUST CREATE-OVALI**

DA BISMO TO URADILI MORAMO KORISTI COMMAND LINE TOOL ZA INTERACTING SA DIGITAL OCEAN-OM DIRECTLY

**INSTRUCTIONS MOZES NACI ODMAH U `Overview` SEKCIJI TVOG CLUSTERA KOJEG SI KREIRO**

VIDECES TU Getting Started OBJASNJENJA

KLIKNI NA 2 `Install management tools`

***
***

digrsija:

OVDE MI JE PRVO RECENO DA CE MI TREBATI VERSION `kubectl`-A, KOJI JE VECI OD VERSION-A, KOJEG TRENUTNO IMAM INSTALIRANO LOKLANO; **USTVARI JA IMAM DVE VERZIJE, ONU NAJNOVIJU, I JOS JEDNU KOJU SAM INSTALIRAO U OKVIRU `gcloud` SDK-JA**

JA SAM ODLUCIO DA UKLONIM TI JEDNU VERZIJU VEZANU ZA GCLOUD

- `gcloud components list`

- `gcloud components remmove kubectl`

SADA IMAM ONU NAJNOVIJU VERZIJU

- `kubectl version --client`

**ZAISTA IMAM VERZIJU 1.20.5**

A NA DIGITAL OCAEN-U MI SAVETUJU DA BAR IMAM 1.20.2

DAKLE TO JE U REDU

***
***

## SADA CEMO DA INSTALIRAMO `doctl`, AN OFFICIAAL DigitalOcean CPMMAND LINE TOOL

[INSTALIRAJ GA](https://github.com/digitalocean/doctl) (NA LINKU TI JE OBJASNJENO KAKO)

MOGU TO DA URADIM SA `snap`-OM

- `sudo snap install doctl`

KADA JE INSTALACIJA IZVRSENA MOZEMO DA RUNN-UJEMO doctl

- `doctl`

I BICE TI POKAZANE AVAILABLE COMMANDS

**SADA MORAMO DA INICIAJALIZUJEMO doctl, ODNOSNO DA SE AUTHENTICATE-UJEM MYSELF, KORISCENJEM MOG DIGITAL OCEAN ACCOUNT-A**

PRE RUNNINGA KOMAND KOD NAS MORAMO OTICI U DIGITAL OCEAN DASBOARD

**U DASBOARD-U U LEVOM MENU-U, PRONADJI `ACCOUNT -> API`**

**TU CES DA PRITISNES NA `Generate New Token`**

GENRISEMO ACCESS TOKEN, KOJI NA M DA JE FULL ACCESS PROGRAMMATICALLY OVER YOUR DIGITAL OCEAN ACCOUNT

TOKENU SAM DAO IME **`doctl1`** (MOZDA JE LOSE IME, ALI NIJE NI BITNO)

TOKEN JE GENERISAN I PREKOPIRAO SAM TAJ DUGACKI STRING

**SADA POKRECEMO KOD NAS LOKALNO:**

- `doctl auth init`

PROMPTED SAM DA UNESEM TOKEN, I PASTPVAO SAM GA I PRITISNUO ENTER

I TO JE TO

# POSTO IMAMO `doctl` UP AND RUNNING ,MOZEMO GA KORISTITI DA INSTALIRAMO CONTEXT TO CONNECT TO OUR CLUSTER INTO OUR LOCAL COPY OF `kubectl`

1. PRVO CEMO DA UZMEMO CONNECTION INFO NASEG NOVOG CLUSTER-A (SECAS SE DA SI CLUSTER NAZVAO `microticket`, ALI TO MOZES VIDETI I U DASBOARD-U `MANAGE` (U LEVOM MENU-U) -> `Kubernetes` -> I TU VIDIM LISTED CLUSTERS)

KUCAMO OVAKO

`doctl kubernetes cluster kubeconfig save <cluster name>`

**ALI PRE TOGA SMO TREBALI KUCATI NESTO STA IMA VEZE SA TI MSTO SMO INSTALIRALI doctl SA SNAPOM**

TREBALI SMO KUCATI

- `snap connect doctl:kube-config`

I ONDA SADA MOZEMO KUCATI

- `doctl kubernetes cluster kubeconfig save microticket`

CIM SAM OVO KUCAO MOGAO SAM VIDETI DA SE I CONTEXT PROMENIO, JER POSTO KORISTIM SPACESHIP TERMINAL VIDIM DA JE CONTEXT PROMENJEN, JER PISE NESTO DRUGO PRED ONE PAHULJE KOJA NAZNACAVA KUBERNETES

**SADAKADA RUNN-UJE BILO KOJI `kubectl` COMMAND ON CE BITI RUNNED AGAINST NEW CLUSTER KOJI JE PODESEN**

- `kubectl get pods`

I VIDIM DA NEMAM NI JEDAN POD ZA SADA

- `kubectl get nodes`

```zsh
NAME                     STATUS   ROLES    AGE     VERSION
pool-microticket-8b91e   Ready    <none>   3h22m   v1.20.2
pool-microticket-8b91g   Ready    <none>   3h22m   v1.20.2
pool-microticket-8b91w   Ready    <none>   3h20m   v1.20.2
```

I VIDIM DA IMAM ONA TRI NODE-A CONNECTED TO MY DIGITAL OCEAN CLUSTER

1. SAD MOGU LISTOVATI ALL CONTEXTS

- `kubectl config view` (BOLJA KOMANDA JE `kubectl config get-contexts`)

TU MOGU VIDETI SE DRUGE CLUSTERS AGAINST WHOM I WAS RUNNING kubectl COMMANDS

MOZES VIDETI NJIOVE **`name`**-OVE

3. A AKO NEKADA BUDES ZELEO DA RADIS SA DRUGIM CLUSTEROM, DA PROMENIS CONTEXT; MOZES RUNN-OVATI SLEDECU KOMANDU

- `kubectl config use-context <context_name>`

# JOS TI JEDNOM NAPOMINJEM DA MI NECEMO NISTA DIREKTNO DEPLOY-OVATI NA CLUSTER BY CONNECTING TO IT, AND APPLYING TO IT; VEC CEMO SE MY RELLY-OVATI UPON OUR GITHUB WORKFLOW, KOJI CEMO PODESITI

JEDINI RAZLOG STO OVDE POKAZUJEMO KAKO SE CONNECT-UJE DIREKTNO TO THE CLUSTER, JESTE KAKO BI MOGAO RADITI NEKI DEBUGGIG PO POTREBI

ILI DA SAMO PULL-UJES LOGS I STVARI POPUT TOGA
