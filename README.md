# DON'T FORGET TO INSTALL INGRESS-NGINX, FOR YOUR K8S CLUSTER ON DIGITAL OCEAN

SECAS SE DA SMO TO RADILI I ZA NAS DEVELOPMENT CLUSTER; A NAS DEVELOPMENT CLUSTER JE DEPLOYED NA GOOGLE CLOUD-U, I MI SMO MORALI DA RUNN-UJEMO SPECIFICNU KOMANDU, U ZAVISNOSTI KOJI JE PROVIDER CLUSTERA, A U SLUCAJU DEVELOPMENTA TO JE BIO GOOGLE CLOUD KAO PROVIDER

**SADA MI TREBA KOMANDA ZA INSTALACIJU INGRESS KONTROLERA, KOJA ODGOVARA TOME DA JE NAS CLUSTER DEPLOYED NA DIGITAL OCEAN-U**

[TAKVU KOMANDU SAM NASAO OVDE U DOKUMENTACIJI](https://kubernetes.github.io/ingress-nginx/deploy/#digital-ocean)

DA OPET PROVERIM IMAM LI PRAVI CLUSTER CONTEXT

- `kubectl config get-contexts`

VIDEO SAM DA IMAM (A DA NISI IMAO PROMENIO BI CONTEXT NA `kubectl config use-context <context name>`)

PA CU SADA DA RUNN-UJEM SLEDECU KOMANDU, PREKOPIRANU SA GORNJEG LINKA

- `kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.46.0/deploy/static/provider/do/deploy.yaml`

## ALI MI MORAMO URADITI JOS JEDAN QUICK THING, A TO JE DA COMMIT-UJEMO NASE CHANGES, KOJE SMO NAPRAVILI SA SVIM NASIM K8S MANIFEST FILE-OVIMA

ODNONO MI SMO IH, AKO SE SECAS PODELILI U RAZLICITE FOLDERE, DA BI NEGDE SPECIFICIRALI RALICITE IMAGE-OVE, SVOJSTVENE ZA PRODUCTION

A TAKODJE SMO NA SAMOM GITHUB-U DEFINISALI WORKFLOW, KOJI SVE TE CONFIGURACIJE TREBA DA APPLY-UJE NA CLUSTER

**PRECI CEMO U DEV BRANCH, JER SMO TAKO I RANIJE RADILI (NECU DA POKUSAM PRAVLJANJE NI JEDNOG PULL REQUESTA STO SE TICE BRANCH-EVA, KOJE MI SLUZE ZA BELEZENJE OVOG WORKSHOPA-A)**

UGLAVNOM, PREBACIO SAM SE U `dev` BRANCH, I U NJEGA MERGE-OVAO SVE PROMENE KOJE SAM NAPRAVIO `git merge <odredjeni branch u kojem sm bio>`

**SADA CEMO DA PULL-UJEMO PROMENE IZ MAIN-A, JER SMO AKO SE SECAS I TAMO PRAVILI SVE PROENE ZA WORKFLOWS, KOJE NEMAMOM**

- `git pull origin main`

E SADA DA COMMIT-UJEMO SVE PROMENE KOJE SMO PRAVILI LOKALNO

- `git add -A`

- `git commit -am 'k8s manifests are ready'`

PUSH-UJEM SVE DO DEV REMOTE-A

- `git push origin dev`

**IDEMO NA GITHUB DA NAPRAVIMO PULL REQUEST ZA MERGING dev-A INTO `main`** (IDEMO U `Pull requests` TAB GDE BRAVIMO NOVI PULL REQUEST, I RADIM SVE PO REDU STO SAM VEC I RANIJE RADIO)

SADA KADA KREIRAS PULL REQUES NECE SE OBAVITI NI JEDAN TETING WORKFLOW, JER NISMO NISTA MNJALI U MICROSERVICE-OVIMA

**MOZEMO DA KLIKNEMO NA `Merge pull request`**

POSTO IMAMO `.github/workflows/deploy-auth.yml` WORKFLOW, KOJI DEFINISE ACTION KOJI SE POKRECE ON PUSH TO `main` A MERGING PULL REQUESTA TO MAIN SE RACUNA KAO push TO main

DESICE SE BUILDING IMAGE I NJEGOV PUSHING TO DOCKER HUB, STO SMO VEC I RANIJE URADILI I ZNAMO DA CE SE DESITI

**ALI DESICE SE I APPLYIG SVIH POTREBNIH MANIFEST FILE-OVA NA NAS CLUSTER U DIGITAL OCEAN-U, JER JE `.github/workflows/deploy-manifests.yml` TAJ KKOJI SE ISTO RUNN-UJE ON push TO MAIN BRANCH**
