# CREATING A CHARGE WITH STRIPE

DAKLE U PROSLOM BRANCHU SMO PODESILI STRIPE SECRET KEY U SECRET KUBERNETES OBJECT-U, I DEFINISALI SMO U CONFIGU UCITAVANJE TOG KEY-A, KO ENVIROMENT VARIIJABLE

SADA CEMO TO DA KORISTIMO U JEDNOM SEPARATE FILE-U, KOJEG CEMO DA NAPRAVIMO, U CILJU DA U NJEGA UVEZEMO STRIPE LIBRARY I INSTATIATE-UJEM STRIPE LIBRARY

- `touch payments/src/stripe.ts`

```ts
import Stripe from "stripe";

export const stripe = new Stripe(process.env.STRIPE_KEY as string, {
  apiVersion: "2020-08-27", // CIM NAPISES "" BIO MI JE SUGESTED OVAJ VERSION
  typescript: true, // za ovo kazu da nema nekog efekta, ali stavicu ovo
});

```

# MOZEMO SADA IMPORTOVATI `Stripe` INSTANCU, U NASEM HANDLERU, I KORISTITI JE DA CHARGE-UJEMO USERS CREDIT CARD

***
***

ALI KAKO MI, USTVARI CHARG-UJEMO USERS CREDIT CARD KORISCENJE STRIPE LIBRARY-JA

[NAJBOLJE JE POGLEDATI API REFERENCE](https://stripe.com/docs/api) KAKO BI OVO BOLJE RAZUMEO 

LEFT SIDE NADJI SECTION [`Charges`](https://stripe.com/docs/api/charges)

A TU PRONALAZIMO SECTION [`Create A Charge`](https://stripe.com/docs/api/charges/create?lang=node)

NA CODE SAMPLE-OVIMA TI MOZES DA BIRS LIBRARY, PA TI BIRAJ NODEJS

TU DAKLE SAZNAJEM DA SE CHARGE KREIRA (ODNOSNO DA SE USER CREDIT CARD BILL-UJE), TAKO STO SE KORISTI `await <Stripe INSTANCA>.charge.create(`

DODAJE SE KAI ARGUMENT OPPTION OBJECT

DVA FIELD-A SU REQUIRED A TO SU `amount` I `currency`

MI CEMO SVE GA UNETI TRI DO 4 OPCIJE

`amount` SE POSTAVLJA U SMALLEST CURRENCY UNIT-IMA; STO ZNACI DA CE SE PODESAVATI BROJ `CENTA`(`CENTS`) AKO SE KAO `currency` KOORISTI `usd`

SRO BI ZNACILO DA KADA STRIPE BUDE SUPPORTED U SRBIJI, MOCI CES DA CHARGE-UJES A amount BI POSTAVLJAU U BROJU `PARA` (JER PARA JE SMALLEST UNIT OD DINARA)

**DAKLE AKO TI STORE-UJES PRICE U DOLARIMA, NEOPHODNO JE DA IH PRE POZIVA POMENUTE FUNKCIJE, USTVARI CONVERTUJES U CENTS; A 100 CENTS JE 1$, STO ZNACI DA DOLARE MULTIPLY-UJES SA 100 DA DOBIJES CENTS**

***
***

KONACNO UVIZIKO I KORISTIMO Stripe INSTANCU

- `code payments/src/routes/new.ts`

```ts

```
