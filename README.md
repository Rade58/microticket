# U KOJIM KOLEKCIJAMA, U MICROSERVICE-OVIMA, TREBA DA SE PRIMENJUJE INCREMENTING `version` FIELD-A, KADA SE DOKUMENT UPDATE-UJE

OPET PRVO MORAS SAGLEDATI SITUACIJU PREKO ZAMISLJENOG PROBLEMA

JEDAN TVOJ MICROSERVICE, KOJI BI SE ZVAO `comments` MICROSERVICE, EMIT-UJE EVENT: `"comment:created"`, KOJI NA KRAJ USTIZE DO DVA DRUGA MICROSERVICE-A: `query` I `moderation`

1. `query` JE TAJ KOJI ISTO KAO I OSTALI MICROSERVICE-I PRAVI TA REPLICATION, I KADA USER HOCE DA UZME DATA ON GA OPSLUZI

2. `moderation` SERVICE JESTE TAJ KOJI PROVERVA SAM KOMENTAR, DA LI IMA NESTO STO JE FORBIDDEN

***

ULOGA `query` MICROSERVICE-A

DATA JE AVAILABLE ODMAH KROZ query MICROSERVICE, JER CIM JE COMMENT CREATED, ON ZNA ZA TO JER JE DOBIO EVENT, ALI KOMENTAR JE POSLAT DO KORISNIKA CENZURISAN, JER SE NA KRAJU KRAJEVA CEKA MODERATION (**CEKA SE PROMENA STATUSA TOG KOMENTARA OD STRANE MODERATION MICROSERVICE-A**, A DO TADA JE PRIKAZAN NEKI TEKS KORISNIKU DA JE "*comment made, but is awaitong for moderation"*)

***

***

ULOGA `moderation` MICROSERVICE-A

ON OBAVLJA NEKI PROCESSING NA KOMENTARU DA VIDI DA LI JE KOMENTAR U REDU, ILI SA OVIM MICROSERVICE-OM RAZGOVARA ADMINISTRATOR, I KADA ON ODLUCI DA PROVERI KOMENTAR, I DA UPDATE-UJE NJEGOV STATUS, ON CE TO ODRADITI

***


**OBRTI PAZNJU DA JE `comments` MICROSERVICE, TAJ KOJI MORA SVE DA ZNA O PROMENI KOMENTARA, ODNOSNO UPDATING-U, JER ON JE MICROSERVICE, KOJI SE BAVI KOMENTARIMA, I ON MORA DA ZNA KADA JE KOMENTAR `CREATED/UPDATED/DESTROYED`**
