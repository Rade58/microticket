# OTHER DATBASES AND OPTIMISTIC CONCURRENCY CONTROL

***

digresija:

OVAJ BRANCH JE MOZDA VAZAN I ZBOG TOGA STO CU KROZ exec KOTRISTITI MONGODB DATBASE U SAMOM POD-U, KAO ADMIN ZA DATBASE, DAKLE IMACU MONGO CLI (DOBRO JE DA OVO URADIS KAKO BI SE I PODSETIO KAKO SE KORISTI INSTANCA MONGO-A KROZ CLI ,GDE MOZES DIREKTNO MANIPULISATI SA ATABSE-OM, PRAVECI NOVE DOKUMENTE I OSTLO)

DA SE SADA VRATIMO NA TEMU

***

OVDE DAKLE GOVORIM O ATBASE-OVIMA, KOJI NISU MONGO

VEROVATNO JE DA ONAJ OPTIMISTIC CONCURRENCY CONTROL NIJE ISTI I U DRUGI MDATBASE-OVIMA

PITANJE JE DA LI GA, UOPSTE IMA OUT OF THE BOX U DRUGIM MICROSERVICE-OVIMA

I PITANJE JE DA LI JE NA ISTI NACIN IMPLEMENTIRAN

**RECIMO U NEKI MDATBASE-OVIMA MOZE VITI DA SE version POVECAVA SA 100 NA 200, SA 200 NA 300 I TK ODALJE**

***

O OVOM PROBLEMU, DRUGIH DATBASE-OVA I CONCURRENCY CONTROL-A, AUTOR WORKSHOP-A GOVORI U VIDEO-U `19-23`

***

**A RESENJE JE DA SE OVAJ OPTIMISTIC CONCURRENCY CONTROL DEFINISE BY YOU**

DAKLE TI TO MOZES DEFINISATI NE VEZANO ZA IMPLEMENTACIJU BILO KOJEG DATBASE-A

**I JA POTPUNO VIDIM KAKO SE TO MOZE IMPLEMENIRATI, A DA NIJE ABSTRACTED U MONGO-U, ALI JA TO NECU URADITI**

## A STO SE TICE SAMOG MONGODB-JA, TI NISI MORAO KORISTITI, UOPSTE ONU OPCIJU `optimisticConcurrency`, VEC SI TO SAM MOGAO DEFINISTI KROZ DVE STVARI ZA KOJE CU TI RECI

ZASTO BI TO URADIO UOPSTE?

**`PA AKO JE version POSLAT IZ DRUGOG DATABASE-A, GDE ON IMA DRUACIJA PRAVILA PROMENE, NA PARIMER INCRMENTIRANJE ZA 100; A REPLICATED DATA CUVAS U DRUGOM MICROSERVICE-U, INSIDE MONGODB DATABASE, A TI ONDA MORAS RECI MONGO-U DA INCREMENT A 1 NIJE TACAN`**

OVO JE NAJLAKSE PREVAZICI KORISCENJEM `pre` HOOK-A U DATABASE-U, GDE CES RADITI NESTO U SLUCAJU `"save"`-A, DAKLE PRE SAVE

**ALI PORED PRE HOOK-A, TI MORAS KORISTITI [`$where`](https://mongoosejs.com/docs/api/model.html#model_Model-$where) PROPERTI**

>> Additional properties to attach to the query when calling save() and isNew is false.

DAKLE OVDE JE OPET REC O OVERRIDINGU NECEGA I POHRANJIVANJE TOGA U DATBASE, A U OVOM SLUCAJU TO JE `version` FIELD

URADICU OVO U SLUCAJU JEDNE KOLEKCIJE I JEDNOG MICROSERVICE-A

URADICU TO ZA Tickets INSIDE orders

- `code orders/src/models/ticket.model.ts`

*AUTOR WORKSHOPA ZA OVO KAZE DA JE VEOM HACKY STVAR*

```ts

```

