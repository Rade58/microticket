# CREATING A QUEUE

***

digresija:

**NEMOJ SLUCAJNO DA MESAS OVO ZA QUEUE GROUP-AMA NEKOG KNALA, U NATS STREAING SERVERU**

TO SSU POTPUNO RAZLICITE STVARI (SAMO TI NAPOMINJEM)

***

- `mkdir expiration/src/queues`

U SLEDECEM FILE-U STAVICU MNOGO ACODE-A, RELATED TO Bull JS

- `touch expiration/src/queues/expiration-queue.ts`

HAJDE DA NAPRAVIM OVERVIEW STA CU JA USTVARITI RADITI

1. "`order:created`" EVENT STIZE U `exoiration` MICROSERVICE

2. KORISTICEMO JEDNU STVAR KOJA CE SE ZVATI `expirationQueue`, I KOJ UCEMO DEFINISATI U FILE-U KOJ ISMO MALOCAS KREIRALI

KORISTICEMO JE KAKO BI SMO ENQUEUE-OVALI NOVI JOB

O `JOB`-U MOZEMO RAZMISLJATI KAO O NECEMU STO JE SIMILAR IN NATURE, TO THE EVENT

DAKLE PISACEMO **CODE TO ENQUEUE A JOB**, ILI ESENTIALLY MOZEMO RECI DA TADA "PUBLISH-UJEMO JOB"

3. POMENUTI JOB BICE SENT TO REDIS SERVER

TAMO CE BITI LIST OF DIFFERENT JOBS, KOJI CE IMATI TYPE **`"order:expiration"`**

DAKLE JOB KOJI JE SENT DO REDIS SERVERA CE NA SEBI IMATI TYPE, KOJI CE BITI STRING DESCRIPTION (EKVIVALENTNO ONOM SUBJECTU, ILI CHANNEL-U KADA GOVORIMO O NATS-U)

4. JOB CE ONDA TEMPORRY BITI STORED U REDIS-U

I BICE STORED TAMO, DOK NE ELAPS-UJE 15 MINUTA ILI SLICNO

5. KADA VREME PROTEKNE REDIS SERVER CE UZETI JOB I POSLACE GA NAAD DO `expirationQueue`-A

A TO CEMO IMATI CODE DEDICATED ZA PROCESSING INCOMMING JOB-A

6. KADA SE PROCESS-UJE JOB, ZELIM ODA EMMIT-UJEMO EVENT **`expiration:complete`**

## MI CEMO MORATI DA FIGURE0-UJEMO OUT, KAKVU CEMO TO INFORMACIJU MI ZELETI DA STORE-UJEMO INSIDE A JOB OBJECT

MORAMO DA STORE-UJMO NESTO STO UKAZUJE O TOM O KOJEM SE TO ORDERU RADI, KOJEG ZELIMO DA EXPIRE-UJEMO

NAJBOLJE DA TO BUDE `orderId`

NISTA DRUGO I NETREBA

orderId JEDINO TREBA DA BUDE ONO STO CE SE PUBLISHOVATI SA `"expiration:complete"` EVENTOM

```ts

```


