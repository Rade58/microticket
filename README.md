# RUNNING TESTS ON PR CREATION

***
***

digresija:

**RESI OVO ODMAH, U SVIM MICROSERVICE-OVIMA, A TICE SE TESTOVAA I TYPESCRIPT-A; I NJIHOVOG FAILINGA U CONTAINERU GITHUB-A, KOJI ON SPINN-UJE ZA RUNNING ACTION-A**

INSTALIRAJ U SVIM MICROSERVICE-OVIMA, TYPE-OVE ZA JEST

- `cd <microservice>`

- `yarn add @types/jest --dev`

***
***

DAKLE PODESILI SMO NAS GITHUB ACTION, URADILI SVE STA SMO URADILI

- `cat .github/workflows/tests.yml`

```yml
name: tests
# 
on:
  pull_request
  
jobs:
  build:

    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v2
      - run: cd auth && npm install && npm run test:ci

```

NECU SE PONAVLJATI, CITAJ PROSLI BRANCH AKO TE ZANIMA STA SAM RADIO

SADA CEMO KONACNO RADITI ONAJ WORKFLOW KOJI SAM POMINJAO, I KOJI AUTOR WORKSHOPA VOLI DA KORISTI

***
***

**LOCAL MACHINE**

- MAKE CHANGES TO YOUR CODEBASE, ILI DO TVOG JEDNOG MICROSERVICE-A

- COMMIT-UJ CODE TO ANY BRANCH, OSIM master ILI main BRANCH-A

- PUSH-UJ BRANCH TO GITHUB

**GITHUB**

- GITHUB RECEIVES UPDATED BRANCH

- TI MANUELNO PRAVIS PULL REQUEST TO MERGE UPDATED BRANCH TO THE main

- GITHUB AUTOMATICALLY RUNS TESTS FOR PROJCT

- NAKON STO TEST-OVI PASS-UJU; TI MERGE-UJES PR (PULL REQUEST) U main BRANCH

- POSTO JE main BRANCH PROMENJEEN; GITHUB TREBA DA BUILD-UJE I DEPLOY-UJE U NAS LIVE KUBERNATES CLUSTER

***
***

**ON LOCAL MACHINE**

# 1. DAKLE PRVO CEMO IZMENITI NEKI FILE

UBACI NEKI `console.log` BILO GDE U `auth` MICROSERVICE-u

NE MORAS NISTA DA COMMIT-UJES U TRENUTNOM BRANCH-U (NA PRIMER MI SMO IN `main` BRANCH)

I TU DAKLE NISTA NE COMMIT-UJEMO

CTITICAL PART JE DA NIST NE COMMIT-UJEMO U `main` BRANCH-U

# 2. NAPTRAVI NOVI BRANCH, I COMMIT-OVACU CODE TO THAT BRANCH

- `git checkout -b dev`

- `git add -A`

- `git commit -am "feat(auth/src/index.ts) added a console log"`

# 3. PUSH-UJEM NOVI BRANCH, KOJI SAM NAZVAO `dev`, TO THE GITHUB

- `git push origin dev`

***

digresija:

AKO SE SECAS MI KOTISTIMO INCE `git push -u origin <branch>` (TO RADIMO KAKO NE BISMO MORLI STALNO DA RADIMO `git push origin` ,VEC DA SLEDECI PUT MOZEMO DA KUCAMO SAMO `git push`)

***
***
***

**ON GITHUB**

1. OTVORI `Pull requests` TAB

MOZES KLIKNUTI NA ONO `Compare & pull request`; ALI MI CEMO SADA NAPRAVITI PULL REQUEST MANUALLY; TAKO DA KLIKNI NA `New Pull Request`

SADA SI U NEKOM DIALOGU `Compare changes`

I U TU U PADJUCIM MENU-OVIMA MOZES DA BIRAS BRANCH-EVE

KAO `base` BRANCH PODESAVAS `main`; A KAO `compare` BRANCH PODESAVAS `dev`

SADA MOZES DA KLIKNES NA `Create Pull Request`

SADA CES BITI PROMPTED DA DODAS TITLE ZA PULL REQUEST I DA UNESES MESSAGE, KAO NEKI DESCRIPTION ABOUT CHANGES YOU WANT TO MAKE

I ONDA KLIKNES NA `Create Pull Request`

<!--  -->

<!--  -->
***
***
