# ZELIM DA PODESIM REMOTE DEVELOPMENT ON GOOGLE CLOUD

PRVENSTVENO ZATO STO MOJA MACHINA NECE IZDRZATI VELIKI BROJ POD-OVA, KOJI CE BITI U JEDNOM NODE-U U CLUSTERU, JER IMAM STARIJU MACHINEU SA MALO RAM MEMORIJE

# OVERVIEW O TOME KAKO CU DA RUNN-UJEM KUBERNETES ON GOOGLE CLOUD

MOJ KOPJUTER CE I DALJE DA RUNN-UJE BROWSER (TO NISTA NIJE SPORNO)

MOJ CLUSTER CU JA RUNN-OVATI NA GOOGLE CLUD VIRTUAL MACHINE-U

**NA MOM KOMPJUTERU UOPSTE NECU RUNN-OVATI KUBERNETES; VEC CU LEVERAGE-OVATI SOME REMOTE COMPUTER**

IMACU NODE NEGDE NA CLUDU, KOJ ICE RUNN-OVATI ALL OF OUR DIFFERENT PODS

## TI CES MORATI DA RAZUMES STA SKAFFOLD STVARNO RADI ZA NAS

ON CE BITI TOOL, KOJ ICE NAM OMOGUCITITI DA SVE PODESIMO NA GOOGLE CLOUD-U, I TO VEOM VEOMA LAKO

ZASTO SE KORISTI GOOGLE CLOUD, A NE RECIMO AWS, ILI NESTO SLICNO

**PA TO JE ATO STO JE SKAFFOLD NAPRAVILI TEAMS AT GOOGLE; I ON IMA TIGHT INTEGRATION WITH GOOGLE CLOUD IN GENERAL**

## EVO IH SCENARIO-I KAO CE SE DESAVATI DEVELOPMENT ON GOOGLE CLOUD, UZ KORISCENJE SKAFOLLD-A KAO TOOL-A

**ZADACU DODATNU KONFIGURACIJU U SKAFFOLD, I RECI CU DA ZELI MDA KORISTIM SOME NODE, HOSTED ON GOOGLE CLOUD**, A NE LOCAL NODE NA NASOJ MACINE-I

SKAFFOLD NE SAMO DA CE KREIRATI ALL DIFFERENT SERVICES, DEPLOYMENTS I SVE OSTALO; VEC KAO STO ZNAS ON JE I CRITICALLY IN CHARE O HANDLE-OVANJU CHANGES-A, KOJE PRAVIMO U NASEM PROJEKTU AS WELL (MISLLIM NA PROMENE U NASEM CODEBASE-U I PROMENE KOJE SE DESE KADA INSTALIRAMO NOVI NODE MODULE)

**MI USTVARI PRAVIMO CHANGES U FILLE-U KOJI JE SYNC ILI JE UNSYNC**

- `cat `

```yaml
apiVersion: skaffold/v2beta13
kind: Config
deploy:
  kubectl:
    manifests:
      - ./infra/k8s/*
build:
  local:
    push: false
  artifacts:
    - image: radebajic/tick-auth
      context: auth
      docker:
        dockerfile: Dockerfile
      sync:
        manual:
          - src: 'src/**/*.{ts,js}'
            dest: .
```

**VIDIS KAKO SU SYNCED SAMO ON IFAJLOVI U SOURCE FOLDERU ZA MICROSERVICE auth**

DAKLE TE CE PROMENE BITI SYNCED SA CORRESPONDING PODOM U NASEM CLUSTER-U

**RANIJE SAM MISLIO DA SE REBUILD-UJE IMAGE, ALI IPAK NIJE TAKO, PROMENE CE SE SE SAMO STICK-OVATI INSIDE CORRESPONDING POD; DIREKTNO U POD, BER IMAGE REBUILD-A**

JA CU KONFIGURIRATI SKAFFOLD DA REACH-UJE U GOOGLE CLOUD KADA MI NAPRAVIMO PROMENU U SYNNCED FILE-OVIMA, I SKAFFOLD CE REACH-OVATI TO THE NODE, KOJI RUNN-UJE SPECIFIC POD, I CHANGED FILE CE STICK-OVATI, DIREKTNO U TAJ POD; I TAK OCE UPDATES BITI PROCESSED

**SCENARIO U KOJEM MENJAMO USYNCED FILE, MALO JE KOMPLIKOVANIJI**

`UPRAVO JE TO NEKA INSTALACIJA, KOJA BU PROMENILA package.json FILE`

TAJ CHANGE NECE BITI AUTO INJECTED INTO POD, JER NIJE LISTED KAO FILE KOJ ISE SYNC-UJE

**E PA TO JE SIGN KOJI SE SKAFFOLD-U DAJE DA BI REBILD-OVAO ENTIRE IMAGE TOG MICROSERVICE-A, ZATIM UPDATE-UJE CORRESPONDING DEPLOYMENT U NASEM CLUSTER-U**

DAKLE NA NASEM KOMPJUTERU OTVORILI BI EDITOR, I CHANGE-OVALI BI FILE KOJI NIJE LISTED KAO SYNCHED ,KAO STO JE package.json FILE; **SKAFFOLD CE TO DETECT-OVATI**

I TU CE BITI DODAT `EXTRA STEP`

SKAFFOLD CE REACH-OVATI DO SERVICE-A, KOJI SE RUNN-UJE INSIDE GOOGLE CLOUD I TAJ SERVICE SE ZOVE `Google Cloud Build`

`Google Cloud Build` I ALL ABOUT BUILDING DOCKER IMAGES

SAV CODE IZ RELATED MICROSERVICE-A IS GOING TO BE UPLOADED NA `Google Cloud Build` ,I TO ZAJEDNO SA Dockerfile-OM RELATED TO THAT MICROSERVICE

ONDA CE SE NEKI PROCES `Google Cloud Build`, POKRENUTI I BUILD-OVATI IMAGE FOR US

I IMAGE CE SE GRADITI TAMO DA BI STEDELI RESURSE NASEG RACUNARA, ODNOSNO DA BI SE KORISTILI RESURSI GOOGLE CLOUD-A A NE NASE LOKALNE MACHINE-A

BUILDING IMAGE-A CE BITI BRZI JER, JER GOOGLE CLOUD SERVERS IMAJU EKSTREMNO BRZE INTERNET KONEKCIJE

KADA SE NA GOOGLE CLOUDU BUDU DOWNLOAD-OVALI DEPENDANCIES, TO CE BITI JAKO BRZO (A KADA EBUILD-UJES IMAGE UPRAVO SE DESAVA I INSTALIRANJE DEPENDANCIES-A)

KADA IMAGE BUIDE BUILR SKAFFOLD CE REACH-OVATI DO CORRESPONDING DEPLOYMENT-A U NASEM NODE-U NA CLOUD-U, I RECI CE DEPLOYMENTU DA JE NOVI IMAGE AVAILABLE

DEPLOYMENT CE ONDA RESTART-OVATI NASE PODS, KOJ ICE POCETI DA KORISTE LATEST, UDATED IMAGE
