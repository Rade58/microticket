# CONNECTING TO NATS STREAMING SERVER IN NODEjs WORLD

JA SAM USTVARI U FILE-U `nats_test_project/src/listener.ts` I FILE-U `nats_test_project/src/publisher.ts` PISAO DOSTA BOILERPLATE CODE-A

JA CU MORATI DA URADIM NEKOLIKO STVARI

1. REFAKTORISCAU SVE KAKO BI BILO MUCH EASIER DA SE PUBLISH-UJU I RECEIVE-UJU EVENTS

2. INICIJALNU IMPLEMENTACIJU CU NASTAVITI PISATI U TEST PROJECTU (`/nats_test_project`)

3. ALI CU SVE KASNIJE MOVE-OVTI INTO /common; PA CU TO NARAVNO PUBLISH-OVATI TO NPM U [MOJ PACKAGE](https://www.npmjs.com/package/@ramicktick/common)

NA TAJ NACIN KORISTICU SVU TU LOGIKU ACROSS MY MICROSERVICES

# JA CU KREIRATI ABSTRACT CLASS KOJA CE SE ZVATI `Listener`

ONE SU KLASE KOJE SE NE KORITE DIREKTNO, VEC ZE IZ NJIH PRVENSTVENO EXTEND-UJE

U SUSTIN ISA NJIMA TYPE-UJEM SVE ONO STO CE MORATI IMATI ONA KLASA KOJA JE EXTEND-UJE, ALI TA NOVA KLASA CE IMATI SVU LOGIKU

EVO KOJE CU STVARI TYPE-OVATI ZA TU KLASU

`channelName` (**ABSTRACT PROPERTY**) --> `string` (ali imace dve tacke izmedju, medjutim to ne mogu da type-ujem) (IME KANALA SE JOS NAZIVA Isubject-OM, LI MRZO ME DA PAMTI TERMIN subject)

`onMessage` (**ABSTRACT METHOD**) --> `(event: EventData ) => void`

`stanClient` --> `Stan` (BICE PRE INITIALIZED)

`queueGroupName` -> `string`

`ackWait` -> `number` (MOGUCE CE BITI PODESITI VREME KOJE CE PROTICATI, SVE DOKLE NATS STREAMING SERVER NE POSALJE PONOVO EVENT, JER NIJE DOBIO ACKNOWLEDGMENT) (OVO NIKAD NISI MODIFIKOVAO RANIJE (MISLI MNA TAJ BROJ))

`subscriptionOptions` --> `SubscriptionOptions`

`listen` -> `() => void`

`parseMessage` --> `(msg: Message) => any` (HLPER: OVO CE PARSE-OVATI ONAJ ARGUMENT message HANDLERA)

BOLJE CU SVE OVO OBJASNITI KAD BUDEM KREIRAO ABSTRACT CLASS

U SLEDECEM BRANCHU GRADICU, POMENUTI CLASS
